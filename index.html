<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pusat Game Bahasa Jepang</title>

    <!-- ========================= BAGIAN CSS ========================= -->
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #db2777;
            --secondary-hover: #be185d;
            --correct-bg: #dcfce7;
            --correct-border: #22c55e;
            --correct-text: #166534;
            --incorrect-bg: #fee2e2;
            --incorrect-border: #ef4444;
            --incorrect-text: #991b1b;
            --neutral-bg: #f1f5f9;
            --text-dark: #1e293b;
            --text-light: #475569;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--neutral-bg);
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 700px;
            text-align: center;
        }
        h1, h2, h3 { color: var(--text-dark); }
        p { color: var(--text-light); }

        /* Tombol Umum */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            margin: 5px;
            font-size: 1.1em;
            cursor: pointer;
            border-radius: 8px;
            border: none;
            background-color: var(--primary-color);
            color: white;
            transition: background-color 0.2s;
        }
        .btn:hover { background-color: var(--primary-hover); }
        .btn-secondary { background-color: #64748b; }
        .btn-secondary:hover { background-color: #475569; }
        .btn-kana { background-color: var(--secondary-color); }
        .btn-kana:hover { background-color: var(--secondary-hover); }

        /* Layar Awal & Pemilihan */
        .selection-group { margin: 20px 0; border-top: 1px solid #e2e8f0; padding-top: 20px; }

        /* Game Pilihan Ganda (MC) */
        #mc-stats-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background-color: #f8fafc;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95em;
            color: var(--text-light);
        }
        #mc-question { font-size: 1.6em; margin-bottom: 25px; font-weight: 500; line-height: 1.4; }
        #mc-question-kana { font-size: 7em; margin-bottom: 15px; font-weight: bold; color: var(--text-dark); }
        .mc-option-btn {
            display: block; width: 100%; padding: 15px; margin: 10px 0; font-size: 1.1em;
            border: 2px solid #cbd5e1; border-radius: 8px; background-color: #ffffff;
            cursor: pointer; transition: all 0.2s;
        }
        .mc-option-btn:hover:not(:disabled) { background-color: #f8fafc; border-color: #94a3b8; }
        .mc-option-btn:disabled { cursor: not-allowed; }

        /* Game Drag & Drop */
        #dd-container { display: flex; justify-content: space-between; margin-top: 20px; user-select: none; }
        .dd-column { width: 48%; }
        .dd-item, .dd-slot {
            padding: 15px; margin: 10px 0; border: 2px solid #cbd5e1;
            border-radius: 8px; background-color: white; min-height: 50px;
        }
        .dd-item { cursor: grab; }
        .dd-item:active { cursor: grabbing; }
        .dd-slot { border-style: dashed; }
        .dragging { opacity: 0.5; }
        .drag-over { background-color: #e0f2fe; border-color: #38bdf8; }

        /* Status Jawaban */
        .correct { background-color: var(--correct-bg) !important; border-color: var(--correct-border) !important; color: var(--correct-text); }
        .incorrect { background-color: var(--incorrect-bg) !important; border-color: var(--incorrect-border) !important; color: var(--incorrect-text); }
        #feedback { margin-top: 20px; font-size: 1.2em; font-weight: bold; line-height: 1.5; }

        /* Visibilitas Layar */
        .hidden { display: none; }

        /* [BARU] Kontrol Musik */
        #music-control {
            position: fixed;
            bottom: 15px;
            right: 15px;
            width: 50px;
            height: 50px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
    </style>
</head>
<body>

    <!-- ========================= BAGIAN HTML ========================= -->

    <!-- [BARU] ELEMEN AUDIO UNTUK MUSIK LATAR -->
    <audio id="background-music" loop>
        <source src="sore1.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung elemen audio.
    </audio>

    <!-- [BARU] TOMBOL KONTROL MUSIK -->
    <button id="music-control">🔇</button>

    <div class="container">
        <!-- 1. Layar Awal: Pilih Kategori -->
        <div id="category-screen">
            <h1>Pusat Game Bahasa Jepang</h1>
            <p>Pilih materi yang ingin kamu pelajari hari ini.</p>
            <div class="selection-group">
                <h3>Tes Kosakata</h3>
                <button class="btn" onclick="selectCategory('classroom')">Ungkapan di Kelas</button>
                <button class="btn" onclick="selectCategory('daily')">Salam Sehari-hari</button>
                <button class="btn" onclick="selectCategory('intro')">Perkenalan Diri</button>
            </div>
            <div class="selection-group">
                <h3>Tes Huruf Kana</h3>
                <button class="btn btn-kana" onclick="startGame('hiragana-test')">Tes Hiragana</button>
                <button class="btn btn-kana" onclick="startGame('katakana-test')">Tes Katakana</button>
            </div>
        </div>

        <!-- 2. Layar Pilih Game (untuk Kosakata) -->
        <div id="game-selection-screen" class="hidden">
            <h2 id="game-selection-title"></h2>
            <p>Pilih jenis permainan yang ingin kamu mainkan.</p>
            <div class="selection-group">
                <button class="btn" onclick="startGame('multiple-choice')">Game 1: Pilihan Ganda</button>
                <button class="btn" onclick="startGame('drag-drop')">Game 2: Cocokkan Kata</button>
            </div>
            <button class="btn btn-secondary" onclick="showScreen('category-screen')">Kembali ke Menu Utama</button>
        </div>

        <!-- 3. Layar Game Pilihan Ganda (Kosakata & Kana) -->
        <div id="multiple-choice-screen" class="hidden">
            <h2 id="mc-title"></h2>
            <div id="mc-stats-bar">
                <span id="mc-progress">Soal: 1/20</span>
                <span id="mc-tally">Benar: 0 | Salah: 0</span>
            </div>
            <div id="mc-question-container"></div>
            <div id="mc-options"></div>
            <div id="mc-feedback"></div>
            <button id="mc-next-btn" class="btn hidden">Lanjut</button>
        </div>

        <!-- 4. Layar Game Drag & Drop (Hanya Kosakata) -->
        <div id="drag-drop-screen" class="hidden">
            <h2 id="dd-title"></h2>
            <p>Seret arti (di kanan) ke frasa Jepang yang sesuai (di kiri).</p>
            <div id="dd-container">
                <div id="dd-jp-column" class="dd-column"></div>
                <div id="dd-id-column" class="dd-column"></div>
            </div>
            <div id="dd-feedback"></div>
            <button id="dd-check-btn" class="btn">Cek Jawaban</button>
        </div>

        <!-- 5. Layar Akhir -->
        <div id="end-screen" class="hidden">
            <h2>Game Selesai!</h2>
            <p id="final-score"></p>
            <button class="btn" onclick="restartGame()">Main Lagi</button>
            <button class="btn btn-secondary" onclick="showScreen('category-screen')">Kembali ke Menu Utama</button>
        </div>
    </div>

<!-- ========================= BAGIAN JAVASCRIPT ========================= -->
<script>
    // --- [BARU] KONTROL MUSIK ---
    const music = document.getElementById('background-music');
    const musicControlBtn = document.getElementById('music-control');
    let isMusicPlaying = false;
    music.volume = 0.3; // Atur volume musik (0.0 sampai 1.0)

    // Fungsi untuk mencoba memutar musik
    function tryPlayMusic() {
        if (isMusicPlaying || !music) return;

        const playPromise = music.play();
        if (playPromise !== undefined) {
            playPromise.then(() => {
                isMusicPlaying = true;
                musicControlBtn.textContent = '🔊';
            }).catch(error => {
                console.log("Autoplay musik dicegah. Menunggu interaksi pengguna.");
                isMusicPlaying = false;
                musicControlBtn.textContent = '🔇';
            });
        }
    }

    // Fungsi untuk meng-handle tombol kontrol musik
    musicControlBtn.addEventListener('click', () => {
        if (isMusicPlaying) {
            music.pause();
            musicControlBtn.textContent = '🔇';
        } else {
            music.play();
            musicControlBtn.textContent = '🔊';
        }
        isMusicPlaying = !isMusicPlaying;
    });

    // Fungsi untuk memulai musik pada interaksi pertama pengguna
    function playOnFirstInteraction() {
        tryPlayMusic();
        // Hapus listener setelah dijalankan sekali agar tidak berulang
        document.body.removeEventListener('click', playOnFirstInteraction);
        document.body.removeEventListener('keydown', playOnFirstInteraction);
    }

    // Tambahkan listener untuk klik atau tombol keyboard pertama
    document.body.addEventListener('click', playOnFirstInteraction);
    document.body.addEventListener('keydown', playOnFirstInteraction);
    
    // Coba putar musik saat halaman selesai dimuat
    window.addEventListener('load', tryPlayMusic);


    // --- DATA ---
    const vocabData = {
        classroom: [ { jp: "Hajimemashou", id: "Mari kita mulai" }, { jp: "Owarimashou", id: "Mari kita akhiri" }, { jp: "Yasumimashou", id: "Mari kita beristirahat" }, { jp: "Wakarimasuka", id: "Apakah anda mengerti?" }, { jp: "Hai, wakarimasu", id: "Ya, mengerti" }, { jp: "Iie, wakarimasen", id: "Tidak, tidak mengerti" }, { jp: "Itte kudasai", id: "Mohon dengarkan/ucapkan" }, { jp: "Mou ichido itte kudasai", id: "Ucapkan sekali lagi" }, { jp: "Yukkuri itte kudasai", id: "Ucapkan perlahan-lahan" }, { jp: "Isshoni douzo", id: "Mari bersama-sama" }, { jp: "Kaite kudasai", id: "Mohon di tulis/tulislah" }, { jp: "Yonde kudasai", id: "Mohon di baca/bacalah" }, { jp: "Hon o akete kudasai", id: "Bukalah buku" }, { jp: "Hon o tojite kudasai", id: "Tutuplah Buku" }, { jp: "Renshuu shite kudasai", id: "Berlatihlah" }, { jp: "Korede owarimasu", id: "Sampai di sini dulu" }, { jp: "Shitsumon ga arimasu ka", id: "Ada pertanyaan?" }, { jp: "Hai, arimasu", id: "Ya, ada" }, { jp: "Iie, arimasen", id: "Tidak, tidak ada" }, { jp: "Chotto matte kudasai", id: "Tunggu sebentar" }, { jp: "Kotaete kudasai", id: "Mohon dijawab/jawablah" }, { jp: "Ii desu", id: "Baik" }, { jp: "Chigaimasu", id: "Salah" }, { jp: "Okurete, sumimasen", id: "Maaf, (saya) terlambat datang" }, { jp: "Sumimasen, toire e itte mo ii desuka", id: "Maaf, bolehkah ke kamar kecil" } ],
        daily: [ { jp: "Ohayou gozaimasu", id: "Selamat pagi" }, { jp: "Konnichiwa", id: "Selamat siang" }, { jp: "Konbanwa", id: "Selamat malam" }, { jp: "Sayounara", id: "Selamat tinggal/selamat jalan" }, { jp: "Oyasuminasai", id: "Selamat tidur/selamat istirahat" }, { jp: "Omedetou gozaimasu", id: "Selamat" }, { jp: "Doumo arigatou gozaimasu", id: "Terima kasih" }, { jp: "Douitashimashite", id: "Terima kasih kembali" }, { jp: "Osakini shitsurei shimasu", id: "Saya permisi duluan" }, { jp: "Osakini Douzo", id: "Silahkan duluan" }, { jp: "Ki o tsukete kudasai", id: "Berhati-hatilah" }, { jp: "Dewa, mata (ja, mata)", id: "Sampai nanti" }, { jp: "Itadakimasu", id: "Terima kasih atas suguhan (sebelum makan)" }, { jp: "Gochisousama deshita", id: "Terima kasih atas hidangan (sesudah makan)" }, { jp: "Sumimasen", id: "Maaf/Permisi" }, { jp: "Gomen nasai", id: "Maaf" }, { jp: "Shitsurei shimasu", id: "Permisi" }, { jp: "Ogenki desuka", id: "Apa kabar?" }, { jp: "Hai, genki desu", id: "Baik/sehat-sehat saja" }, { jp: "Gomen kudasai", id: "Permisi (ucapan pada saat bertamu)" }, { jp: "Itte kimasu", id: "Saya pergi (dari rumah)" }, { jp: "Itte rasshai", id: "Selamat jalan" }, { jp: "Tadaima", id: "Saya kembali (pulang ke rumah)" }, { jp: "Okaeri nasai", id: "Selamat datang kembali" } ],
        intro: [ { jp: "Hajimemashite", id: "Perkenalkan" }, { jp: "Watashi wa [nama] to moushimasu", id: "Nama saya adalah [nama]" }, { jp: "Esu Kei Emu no gakusei desu", id: "Saya siswa dari LPK SKM" }, { jp: "[daerah asal] kara kimashita", id: "Saya datang dari [daerah asal]" }, { jp: "Douzo yoroshiku onegaishimasu", id: "Senang berkenalan dengan Anda" }, { jp: "Kochira koso, yoroshiku onegaishimasu", id: "Senang berkenalan dengan Anda juga" } ]
    };
    const kanaData = {
        hiragana: [ { kana: 'あ', romaji: 'a' }, { kana: 'い', romaji: 'i' }, { kana: 'う', romaji: 'u' }, { kana: 'え', romaji: 'e' }, { kana: 'お', romaji: 'o' }, { kana: 'か', romaji: 'ka' }, { kana: 'き', romaji: 'ki' }, { kana: 'く', romaji: 'ku' }, { kana: 'け', romaji: 'ke' }, { kana: 'こ', romaji: 'ko' }, { kana: 'さ', romaji: 'sa' }, { kana: 'し', romaji: 'shi' }, { kana: 'す', romaji: 'su' }, { kana: 'せ', romaji: 'se' }, { kana: 'そ', romaji: 'so' }, { kana: 'た', romaji: 'ta' }, { kana: 'ち', romaji: 'chi' }, { kana: 'つ', romaji: 'tsu' }, { kana: 'て', romaji: 'te' }, { kana: 'と', romaji: 'to' }, { kana: 'な', romaji: 'na' }, { kana: 'に', romaji: 'ni' }, { kana: 'ぬ', romaji: 'nu' }, { kana: 'ね', romaji: 'ne' }, { kana: 'の', romaji: 'no' }, { kana: 'は', romaji: 'ha' }, { kana: 'ひ', romaji: 'hi' }, { kana: 'ふ', romaji: 'fu' }, { kana: 'へ', romaji: 'he' }, { kana: 'ほ', romaji: 'ho' }, { kana: 'ま', romaji: 'ma' }, { kana: 'み', romaji: 'mi' }, { kana: 'む', romaji: 'mu' }, { kana: 'め', romaji: 'me' }, { kana: 'も', romaji: 'mo' }, { kana: 'や', romaji: 'ya' }, { kana: 'ゆ', romaji: 'yu' }, { kana: 'よ', romaji: 'yo' }, { kana: 'ら', romaji: 'ra' }, { kana: 'り', romaji: 'ri' }, { kana: 'る', romaji: 'ru' }, { kana: 'れ', romaji: 're' }, { kana: 'ろ', romaji: 'ro' }, { kana: 'わ', romaji: 'wa' }, { kana: 'を', romaji: 'wo' }, { kana: 'ん', romaji: 'n' } ],
        katakana: [ { kana: 'ア', romaji: 'a' }, { kana: 'イ', romaji: 'i' }, { kana: 'ウ', romaji: 'u' }, { kana: 'エ', romaji: 'e' }, { kana: 'オ', romaji: 'o' }, { kana: 'カ', romaji: 'ka' }, { kana: 'キ', romaji: 'ki' }, { kana: 'ク', romaji: 'ku' }, { kana: 'ケ', romaji: 'ke' }, { kana: 'コ', romaji: 'ko' }, { kana: 'サ', romaji: 'sa' }, { kana: 'シ', romaji: 'shi' }, { kana: 'ス', romaji: 'su' }, { kana: 'セ', romaji: 'se' }, { kana: 'ソ', romaji: 'so' }, { kana: 'タ', romaji: 'ta' }, { kana: 'チ', romaji: 'chi' }, { kana: 'ツ', romaji: 'tsu' }, { kana: 'テ', romaji: 'te' }, { kana: 'ト', romaji: 'to' }, { kana: 'ナ', romaji: 'na' }, { kana: 'ニ', romaji: 'ni' }, { kana: 'ヌ', romaji: 'nu' }, { kana: 'ネ', romaji: 'ne' }, { kana: 'ノ', romaji: 'no' }, { kana: 'ハ', romaji: 'ha' }, { kana: 'ヒ', romaji: 'hi' }, { kana: 'フ', romaji: 'fu' }, { kana: 'ヘ', romaji: 'he' }, { kana: 'ホ', romaji: 'ho' }, { kana: 'マ', romaji: 'ma' }, { kana: 'ミ', romaji: 'mi' }, { kana: 'ム', romaji: 'mu' }, { kana: 'メ', romaji: 'me' }, { kana: 'モ', romaji: 'mo' }, { kana: 'ヤ', romaji: 'ya' }, { kana: 'ユ', romaji: 'yu' }, { kana: 'ヨ', romaji: 'yo' }, { kana: 'ラ', romaji: 'ra' }, { kana: 'リ', romaji: 'ri' }, { kana: 'ル', romaji: 'ru' }, { kana: 'レ', romaji: 're' }, { kana: 'ロ', romaji: 'ro' }, { kana: 'ワ', romaji: 'wa' }, { kana: 'ヲ', romaji: 'wo' }, { kana: 'ン', romaji: 'n' } ]
    };

    // --- STATE MANAGEMENT ---
    let currentCategory, currentGameType, currentDataSet, score;
    const screens = document.querySelectorAll('.container > div');
    function showScreen(screenId) { screens.forEach(s => s.classList.add('hidden')); document.getElementById(screenId).classList.remove('hidden'); }
    function selectCategory(category) { currentCategory = category; const titles = { classroom: 'Ungkapan di Kelas', daily: 'Salam Sehari-hari', intro: 'Perkenalan Diri' }; document.getElementById('game-selection-title').textContent = titles[category]; showScreen('game-selection-screen'); }
    function startGame(type) { if (type.includes('-test')) { currentGameType = type; currentCategory = null; startMultipleChoice(); } else { currentGameType = type; currentDataSet = [...vocabData[currentCategory]]; if (type === 'multiple-choice') startMultipleChoice(); else if (type === 'drag-drop') startDragDrop(); } }
    function restartGame() { startGame(currentGameType); }

    // --- GAME 1: MULTIPLE CHOICE ---
    let mcQuestionIndex, mcShuffledQuestions, mcCorrectCount, mcIncorrectCount;
    function startMultipleChoice() { if (currentGameType.includes('-test')) { const kanaType = currentGameType.split('-')[0]; currentDataSet = [...kanaData[kanaType]]; document.getElementById('mc-title').textContent = `Tes ${kanaType.charAt(0).toUpperCase() + kanaType.slice(1)}`; } else { currentDataSet = [...vocabData[currentCategory]]; const titles = { classroom: 'Ungkapan di Kelas', daily: 'Salam Sehari-hari', intro: 'Perkenalan Diri' }; document.getElementById('mc-title').textContent = titles[currentCategory]; } mcShuffledQuestions = [...currentDataSet].sort(() => 0.5 - Math.random()); mcQuestionIndex = 0; mcCorrectCount = 0; mcIncorrectCount = 0; score = 0; showScreen('multiple-choice-screen'); showMcQuestion(); }
    function updateMcStats() { document.getElementById('mc-progress').textContent = `Soal: ${mcQuestionIndex + 1}/${mcShuffledQuestions.length}`; document.getElementById('mc-tally').textContent = `Benar: ${mcCorrectCount} | Salah: ${mcIncorrectCount}`; }
    function showMcQuestion() { document.getElementById('mc-next-btn').classList.add('hidden'); document.getElementById('mc-feedback').textContent = ''; updateMcStats(); const questionData = mcShuffledQuestions[mcQuestionIndex]; const questionContainer = document.getElementById('mc-question-container'); const optionsDiv = document.getElementById('mc-options'); optionsDiv.innerHTML = ''; let correctAnswer, options; if (currentGameType.includes('-test')) { questionContainer.innerHTML = `<div id="mc-question-kana">${questionData.kana}</div>`; correctAnswer = questionData.romaji; options = [correctAnswer]; let tempKana = [...currentDataSet]; while (options.length < 4) { const randomKana = tempKana[Math.floor(Math.random() * tempKana.length)]; if (!options.includes(randomKana.romaji)) { options.push(randomKana.romaji); } } } else { const askInJapanese = Math.random() < 0.5; const questionText = askInJapanese ? questionData.jp : questionData.id; questionContainer.innerHTML = `<div id="mc-question">Apa arti dari <strong>"${questionText}"</strong>?</div>`; correctAnswer = askInJapanese ? questionData.id : questionData.jp; options = [correctAnswer]; let tempVocab = [...currentDataSet]; while (options.length < 4 && tempVocab.length > 1) { const randomVocab = tempVocab[Math.floor(Math.random() * tempVocab.length)]; const randomAnswer = askInJapanese ? randomVocab.id : randomVocab.jp; if (!options.includes(randomAnswer)) { options.push(randomAnswer); } } } options.sort(() => 0.5 - Math.random()); options.forEach(option => { const button = document.createElement('button'); button.textContent = option; button.classList.add('mc-option-btn'); button.onclick = () => checkMcAnswer(button, option, correctAnswer); optionsDiv.appendChild(button); }); }
    function checkMcAnswer(selectedButton, selectedOption, correctAnswer) { document.querySelectorAll('.mc-option-btn').forEach(btn => { btn.disabled = true; if (btn.textContent === correctAnswer) btn.classList.add('correct'); }); if (selectedOption === correctAnswer) { document.getElementById('mc-feedback').textContent = "Benar!"; score += 10; mcCorrectCount++; } else { selectedButton.classList.add('incorrect'); document.getElementById('mc-feedback').innerHTML = `Salah! Jawaban benar: <strong>${correctAnswer}</strong>`; mcIncorrectCount++; } document.getElementById('mc-tally').textContent = `Benar: ${mcCorrectCount} | Salah: ${mcIncorrectCount}`; document.getElementById('mc-next-btn').classList.remove('hidden'); }
    document.getElementById('mc-next-btn').addEventListener('click', () => { mcQuestionIndex++; if (mcQuestionIndex < mcShuffledQuestions.length) { showMcQuestion(); } else { showEndScreen(score, mcShuffledQuestions.length * 10); } });

    // --- GAME 2: DRAG & DROP ---
    function startDragDrop() { const maxPairs = Math.min(currentDataSet.length, 5); const ddPairs = [...currentDataSet].sort(() => 0.5 - Math.random()).slice(0, maxPairs); document.getElementById('dd-title').textContent = document.getElementById('game-selection-title').textContent; document.getElementById('dd-feedback').textContent = ''; document.getElementById('dd-check-btn').disabled = false; const jpColumn = document.getElementById('dd-jp-column'); const idColumn = document.getElementById('dd-id-column'); jpColumn.innerHTML = ''; idColumn.innerHTML = ''; const shuffledIndonesian = [...ddPairs].sort(() => 0.5 - Math.random()); ddPairs.forEach(pair => { jpColumn.innerHTML += `<div class="dd-slot" data-correct-id="${pair.id}">${pair.jp}</div>`; }); shuffledIndonesian.forEach(pair => { const item = document.createElement('div'); item.className = 'dd-item'; item.textContent = pair.id; item.draggable = true; idColumn.appendChild(item); }); addDragDropListeners(); showScreen('drag-drop-screen'); }
    function addDragDropListeners() { let draggedItem = null; document.querySelectorAll('.dd-item').forEach(item => { item.addEventListener('dragstart', () => { draggedItem = item; setTimeout(() => item.classList.add('dragging'), 0); }); item.addEventListener('dragend', () => { draggedItem.classList.remove('dragging'); draggedItem = null; }); }); document.querySelectorAll('.dd-slot').forEach(slot => { slot.addEventListener('dragover', e => e.preventDefault()); slot.addEventListener('dragleave', () => slot.classList.remove('drag-over')); slot.addEventListener('drop', e => { e.preventDefault(); slot.classList.remove('drag-over'); if (slot.childElementCount === 0) slot.appendChild(draggedItem); }); }); document.getElementById('dd-id-column').addEventListener('dragover', e => e.preventDefault()); document.getElementById('dd-id-column').addEventListener('drop', e => { e.preventDefault(); document.getElementById('dd-id-column').appendChild(draggedItem); }); }
    document.getElementById('dd-check-btn').addEventListener('click', () => { const slots = document.querySelectorAll('.dd-slot'); let correctCount = 0; slots.forEach(slot => { const droppedItem = slot.querySelector('.dd-item'); slot.classList.remove('correct', 'incorrect'); if (droppedItem && slot.dataset.correctId === droppedItem.textContent) { slot.classList.add('correct'); correctCount++; } else { slot.classList.add('incorrect'); } }); score = Math.round((correctCount / slots.length) * 100); document.getElementById('dd-feedback').textContent = `Kamu benar ${correctCount} dari ${slots.length}!`; document.getElementById('dd-check-btn').disabled = true; setTimeout(() => showEndScreen(score, 100), 2000); });

    // --- LAYAR AKHIR ---
    function showEndScreen(finalScore, maxScore) { document.getElementById('final-score').textContent = `Skor Akhir Kamu: ${finalScore} dari ${maxScore}`; showScreen('end-screen'); }
    
    // --- INISIALISASI ---
    showScreen('category-screen');
</script>

</body>
</html>
```
